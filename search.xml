<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>mangoDB学习笔记</title>
      <link href="/posts/9ccc064a.html"/>
      <url>/posts/9ccc064a.html</url>
      
        <content type="html"><![CDATA[<h1 id="1-mongoDB的安装启动"><a href="#1-mongoDB的安装启动" class="headerlink" title="1 mongoDB的安装启动"></a>1 mongoDB的安装启动</h1><h2 id="1-1-版本"><a href="#1-1-版本" class="headerlink" title="1.1 版本"></a>1.1 版本</h2><p>版本命名规范为x.y.z，y为奇数表示开发版，y为偶数表示稳定版，z是修正版本号，越大越好</p><h1 id="2-单机部署"><a href="#2-单机部署" class="headerlink" title="2.单机部署"></a>2.单机部署</h1><h2 id="2-1-启动"><a href="#2-1-启动" class="headerlink" title="2.1 启动"></a>2.1 启动</h2><p>下载的msi文件需要安装，zip文件解压后直接使用，解压后需要手动建立一个目录存放数据文件</p><p>方式一：命令行参数方式启动服务, 默认端口是27017</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath=..\data\db</span><br></pre></td></tr></table></figure><p>可以在最后添加—install —serviceName mongodb(最后一个参数是系统服务名称，随便取)，将本次参数启动方式注册为系统服务，可以打开win+r，输入services.msc找到，每次可以通过如下命令启动，install可以替换为reinstall、remove</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net mongodb start</span><br></pre></td></tr></table></figure><p>方式二：配置文件方式启动文件</p><p>在解压目录中新建config文件夹，新建配置文件mongod.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongod -f 配置文件路径</span><br><span class="line"># 或者</span><br><span class="line">mongod --config 配置文件路径</span><br></pre></td></tr></table></figure><h2 id="2-2-访问连接"><a href="#2-2-访问连接" class="headerlink" title="2.2 访问连接"></a>2.2 访问连接</h2><p>在比较新版本的 MangoDB 中是没有带命令行访问连接 MongoDB 的可执行程序的，如 mongo 或者 mongosh，如果我们要使用命令行方式访问连接 MongoDB，需要我们自行下载 MongoDB Shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongosh 或者 mongosh --host=127.0.0.1 --port=27017</span><br></pre></td></tr></table></figure><h1 id="3-常用命令"><a href="#3-常用命令" class="headerlink" title="3. 常用命令"></a>3. 常用命令</h1><p>选择和创建数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use articledb</span><br></pre></td></tr></table></figure><p>展示当前使用的数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db</span><br></pre></td></tr></table></figure><p>删除数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase()</span><br></pre></td></tr></table></figure><p>创建集合</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.creatCollections(&quot;my&quot;)</span><br></pre></td></tr></table></figure><p>删除集合</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.drop()</span><br></pre></td></tr></table></figure><p>展示集合</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br></pre></td></tr></table></figure><h2 id="3-1-文档插入"><a href="#3-1-文档插入" class="headerlink" title="3.1 文档插入"></a>3.1 文档插入</h2><p>(1)单个文档插入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.collection.insert(</span><br><span class="line">&lt;document or array of document&gt;,</span><br><span class="line">&#123;</span><br><span class="line">writeConcern: &lt;document&gt;,</span><br><span class="line">ordered: &lt;boolean&gt;</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>【示例】</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db.comment.insert(</span><br><span class="line">&#123;</span><br><span class="line">&quot;articleid&quot;:&quot;1&quot;,</span><br><span class="line">&quot;content&quot;:&quot;天气&quot;,</span><br><span class="line">&quot;userid&quot;:&quot;1&quot;,</span><br><span class="line">&quot;nickname&quot;:&quot;rose&quot;,</span><br><span class="line">&quot;createdatetime&quot;:new Date(),</span><br><span class="line">&quot;likeNum&quot;:&quot;NumberInt(10)&quot;,</span><br><span class="line">&quot;status&quot;:null</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>提示：</p><p>1) 集合不存在会隐式创建<br>2) mongodb默认的数字类型是double<br>3) 插入当前日子new Date()<br>4) 没有指定_id，会自动生成<br>5) 字段没值，填null或不填</p><p>(2) 插入多个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.insertMany(&#123;json数组&#125;)</span><br></pre></td></tr></table></figure><p>(3) try catch语句</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">do</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">print(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-2-文档查询"><a href="#3-2-文档查询" class="headerlink" title="3.2 文档查询"></a>3.2 文档查询</h2><p>查询所有</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.find()</span><br></pre></td></tr></table></figure><p>条件查询</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.comment.find(&#123;&quot;userid:&quot;1&quot;&#125;)</span><br><span class="line">db.comment.findOne(&#123;&quot;userid:&quot;1&quot;&#125;)</span><br></pre></td></tr></table></figure><p>投影查询</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.find(&#123;&quot;userid&quot;:&quot;1&quot;&#125;,&#123;articleid:1,_id:0&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-3-文档更新"><a href="#3-3-文档更新" class="headerlink" title="3.3 文档更新"></a>3.3 文档更新</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collections.update(query,update,options)</span><br></pre></td></tr></table></figure><p>(1)覆盖更新一条数据</p><p>​    用update整个替换query查出来的文档</p><p>(2)局部更新一条数据</p><p>​    更新指定字段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.update(&#123;&quot;articleid&quot;:&quot;1&quot;&#125;,&#123;$set:&#123;likenum:NumberInt(1001)&#125;&#125;)</span><br></pre></td></tr></table></figure><p>(3) 批量修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.updateMany(&#123;&quot;articleid&quot;:&quot;1&quot;&#125;,&#123;$set:&#123;likenum:NumberInt(1001)&#125;&#125;)</span><br></pre></td></tr></table></figure><p>(4)增加或减少</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.updateMany(&#123;&quot;articleid&quot;:&quot;1&quot;&#125;,&#123;$inc:&#123;likenum:NumberInt(-1)&#125;&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-4-文档删除"><a href="#3-4-文档删除" class="headerlink" title="3.4 文档删除"></a>3.4 文档删除</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名称.remove([query]),query可为空</span><br></pre></td></tr></table></figure><h2 id="3-5-分页查询"><a href="#3-5-分页查询" class="headerlink" title="3.5 分页查询"></a>3.5 分页查询</h2><p>统计</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collections.count([query],[options])</span><br></pre></td></tr></table></figure><p>分页</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.comment.find().limit(2)</span><br><span class="line">db.comment.find().skip(3),跳过前三条记录</span><br></pre></td></tr></table></figure><p>排序</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.find().sort(&#123;KEY:1&#125;),升序的键是1，降序的键是-1</span><br></pre></td></tr></table></figure><p>执行的顺序是sort，skip，limit，与输入顺序无关</p><h2 id="3-6-更多查询"><a href="#3-6-更多查询" class="headerlink" title="3.6 更多查询"></a>3.6 更多查询</h2><h3 id="3-6-1-正则查询"><a href="#3-6-1-正则查询" class="headerlink" title="3.6.1 正则查询"></a>3.6.1 正则查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.comment.find(&#123;字段:/正则表达式/&#125;)</span><br><span class="line">包含开水 /开水/</span><br><span class="line">专家开头 /^专家/</span><br></pre></td></tr></table></figure><h3 id="3-6-2-比较查询"><a href="#3-6-2-比较查询" class="headerlink" title="3.6.2 比较查询"></a>3.6.2 比较查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;字段:&#123;$gt:value&#125;&#125; 大于</span><br><span class="line">&#123;字段:&#123;$lt:value&#125;&#125; 小于</span><br><span class="line">&#123;字段:&#123;$gte:value&#125;&#125; 大于等于</span><br><span class="line">&#123;字段:&#123;$lte:value&#125;&#125; 小于等于</span><br><span class="line">&#123;字段:&#123;$ne:value&#125;&#125; 不等于</span><br></pre></td></tr></table></figure><h3 id="3-6-3-包含查询"><a href="#3-6-3-包含查询" class="headerlink" title="3.6.3 包含查询"></a>3.6.3 包含查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;userid:&#123;$in:[&quot;1001&quot;,&quot;1&quot;]&#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="3-6-4-条件查询"><a href="#3-6-4-条件查询" class="headerlink" title="3.6.4 条件查询"></a>3.6.4 条件查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.comment.find(&#123;$and:[&#123;likenum:&#123;$gte:NumberInt(700)&#125;&#125;,&#123;likenum:&#123;$le:NumberInt(2000)&#125;&#125;]&#125;)</span><br><span class="line">或</span><br><span class="line">and 替换成 or</span><br></pre></td></tr></table></figure><h1 id="4-索引"><a href="#4-索引" class="headerlink" title="4. 索引"></a>4. 索引</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.comment.getIndexes()</span><br><span class="line">db.comment.createKeys(keys,options)</span><br><span class="line">db.comment.dropIndex(index)</span><br><span class="line">dropIndexes()</span><br></pre></td></tr></table></figure><p>options提示：</p><p>unique：boolean</p><p>name：string</p>]]></content>
      
      
      <categories>
          
          <category> 计算机学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新冠康复日记</title>
      <link href="/posts/e395fcf2.html"/>
      <url>/posts/e395fcf2.html</url>
      
        <content type="html"><![CDATA[<div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>角色收集时间轴</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>第一次症状明显 2022-12-20</p></div></div><div class='timeline-item-content'><ol><li><code>四肢极度无力</code>，走去医院的过程中感觉站都站不稳。还有就是在床上双腿老是想动，根本睡不着。</li><li>发烧，烧的倒不是很高。但就是感觉脑袋要分裂成两半。</li><li>不在床上头疼想上床，在床上双脚乱动睡不着想下床。</li><li>吐了三次，但貌似我从小到大都是只要吐了就会身体好起来，所以第二天早上起来感觉人恢复了。</li><li>喝了很多种药，感觉它们在我体内发生化学反应。</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>大体恢复了 2022-12-21</p></div></div><div class='timeline-item-content'><ol><li><p>喉咙还有点黏塞。</p></li><li><p>就是有时候感觉发烧还会反复。</p></li><li><p>身边的人越来越多地感染了,希望大家都快点好起来(起初没有人感到这是一场灾难，直到这场灾难与每个人息息相关)。</p></li><li><p>总感觉自己得的是<code>幻阳症</code>。</p></li><li><p>好想<code>吃好吃的</code>啊，大病初愈好想吃好吃的。 </p></li></ol></div></div></div><!-- endtimeline -->]]></content>
      
      
      <categories>
          
          <category> 碎碎念 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 新冠 </tag>
            
            <tag> 康复 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>花径不曾缘客扫，蓬门今始为君开</title>
      <link href="/posts/ca18658.html"/>
      <url>/posts/ca18658.html</url>
      
        <content type="html"><![CDATA[<div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>自我介绍</p></div></div><p>极简主义，没有自我介绍。</p><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>爱好</p></div></div>梦想是星辰大海，但现在却爱上了打牌。<div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><p>绩点</p></div></div><div class="table-container"><table><thead><tr><th style="text-align:center">学期</th><th style="text-align:center">绩点</th><th style="text-align:center">专业排名</th></tr></thead><tbody><tr><td style="text-align:center">大三秋</td><td style="text-align:center">3.88 // 均绩从3.62=&gt;3.65</td><td style="text-align:center">88=&gt;75</td></tr></tbody></table></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>原神五星角色收集轴</p></div></div><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>角色收集时间轴</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p><a href="https://c-ssl.dtstatic.com/uploads/blog/202209/02/20220902163144_f42b8.thumb.1000_0.jpg">刻晴</a></p></div></div><div class='timeline-item-content'><ol><li>2022-02-01 <code>80</code>发！小保底  <code>歪</code></li><li>2022-10-10 <code>76</code>发！常驻池</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p><a href="https://c-ssl.dtstatic.com/uploads/blog/202207/23/20220723103633_9e433.thumb.1000_0.jpeg">钟离</a></p></div></div><div class='timeline-item-content'><ol><li>2022-02-12 <code>79</code>发！大保底  </li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p><a href="https://c-ssl.dtstatic.com/uploads/blog/202110/08/20211008130344_95f84.thumb.1000_0.jpeg">雷电将军</a></p></div></div><div class='timeline-item-content'><ol><li>2022-03-08 <code>59</code>发！小保底  </li><li>2022-03-14 <code>14</code>发！小保底  </li><li>2022-03-18 <code>08</code>发！小保底  </li></ol></div></div></div>]]></content>
      
      
      <categories>
          
          <category> 欢迎做客！ </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
